# æ¨¡å‹è¿‡æ»¤é—®é¢˜ - å®Œæ•´è§£å†³æ–¹æ¡ˆ

## ğŸ“‹ é—®é¢˜æ€»ç»“

ç”¨æˆ·æŠ¥å‘Šçš„é—®é¢˜ï¼š
1. âŒ ä¸é€‰æ‹©"å…¨éƒ¨"ç³»åˆ—å°±ä¸æ˜¾ç¤ºæ¨¡å‹
2. âŒ ç‚¹å‡»"å…¨éƒ¨"åæ‰æ˜¾ç¤ºæ¨¡å‹  
3. âŒ 2.3ç³»åˆ—å’Œ3.1ç³»åˆ—çš„è¿‡æ»¤ä¸æ­£å¸¸ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ¨¡å‹
4. âŒ æ‰€æœ‰æ¨¡å‹ä»·æ ¼éƒ½æ˜¾ç¤ºÂ¥0.99
5. âŒ ç¼ºå°‘hailuo_3_1å’Œhailuo_3_1_proæ¨¡å‹

## ğŸ” æ ¹æœ¬åŸå› 

**æœåŠ¡å™¨æ•°æ®åº“æ²¡æœ‰æ­£ç¡®åˆå§‹åŒ–ï¼**

- åç«¯ä»£ç å·²ç»ä¿®å¤ï¼Œå®šä¹‰äº†10ä¸ªæ¨¡å‹å’Œæ­£ç¡®çš„ä»·æ ¼
- å‰ç«¯ä»£ç å·²ç»ä¿®å¤ï¼Œä½¿ç”¨æ­£ç¡®çš„å­—æ®µåå’Œè¿‡æ»¤é€»è¾‘
- ä½†æ˜¯æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“ä»ç„¶æ˜¯æ—§æ•°æ®ï¼ˆåªæœ‰8ä¸ªæ¨¡å‹ï¼Œæ‰€æœ‰ä»·æ ¼éƒ½æ˜¯0.99ï¼‰

## âœ… å·²å®Œæˆçš„ä¿®å¤

### å‰ç«¯ä¿®å¤ (frontend/src/views/Dashboard.vue)

1. **ä¿®å¤å­—æ®µåé”™è¯¯**
   - ä» `model.model_id` æ”¹ä¸º `model.id`ï¼ˆåç«¯è¿”å›çš„æ˜¯`id`å­—æ®µï¼‰

2. **æ”¹è¿›è¿‡æ»¤é€»è¾‘**
   ```javascript
   // 2.3ç³»åˆ—ï¼šåŒ…å«2.0ã€2.3ã€1.0ç³»åˆ—
   if (modelSeries.value === '2.3') {
     filteredModels = modelsData.models.filter(model => 
       model.id.includes('2_0') || 
       model.id.includes('2_3') || 
       model.id.includes('hailuo_1_0')
     )
   }
   
   // 3.1ç³»åˆ—ï¼šåŒ…å«3.1å’Œbeta_3ç³»åˆ—
   else if (modelSeries.value === '3.1') {
     filteredModels = modelsData.models.filter(model => 
       model.id.includes('3_1') || 
       model.id.includes('beta_3')  // ä¿®å¤ï¼šåŒ…å«æ‰€æœ‰beta_3å¼€å¤´çš„
     )
   }
   ```

3. **æ·»åŠ è°ƒè¯•æ—¥å¿—**
   - æ˜¾ç¤ºæ‰€æœ‰æ¨¡å‹å’Œä»·æ ¼
   - æ˜¾ç¤ºè¿‡æ»¤ç»“æœ
   - æ˜¾ç¤ºæœ€ç»ˆå¯ç”¨æ¨¡å‹æ•°é‡

4. **æ·»åŠ å“åº”å¼ç›‘å¬**
   - ç›‘å¬è·¯ç”±å‚æ•°å˜åŒ–
   - ç›‘å¬å¯ç”¨æ¨¡å‹å˜åŒ–
   - è‡ªåŠ¨åˆ‡æ¢åˆ°åˆé€‚çš„æ¨¡å‹

### åç«¯ä¿®å¤ (backend/main.py)

1. **å®Œæ•´çš„10ä¸ªæ¨¡å‹å®šä¹‰**
   ```python
   default_models = [
       {"model_id": "hailuo_2_3", "price": 0.99, ...},
       {"model_id": "hailuo_2_3_fast", "price": 0.79, ...},
       {"model_id": "hailuo_2_0", "price": 1.19, ...},
       {"model_id": "hailuo_3_1", "price": 1.59, ...},        # æ–°å¢
       {"model_id": "hailuo_3_1_pro", "price": 2.99, ...},    # æ–°å¢
       {"model_id": "beta_3_1", "price": 0.69, ...},
       {"model_id": "beta_3_1_fast", "price": 0.35, ...},
       {"model_id": "hailuo_1_0_director", "price": 0.59, ...},
       {"model_id": "hailuo_1_0_live", "price": 0.59, ...},
       {"model_id": "hailuo_1_0", "price": 0.49, ...}
   ]
   ```

2. **æ­£ç¡®çš„ä»·æ ¼è®¾ç½®**
   - æ¯ä¸ªæ¨¡å‹æœ‰ä¸åŒçš„ä»·æ ¼
   - ä»Â¥0.35åˆ°Â¥2.99

3. **æ­£ç¡®çš„æ’åº**
   - sort_orderä»1åˆ°10

## ğŸ”§ éœ€è¦æ‰§è¡Œçš„æ“ä½œ

### âš ï¸ å…³é”®æ­¥éª¤ï¼šé‡ç½®æœåŠ¡å™¨æ•°æ®åº“

é€‰æ‹©ä»¥ä¸‹ä»»ä¸€æ–¹æ³•ï¼š

#### æ–¹æ³•1ï¼šåˆ é™¤æ•°æ®åº“æ–‡ä»¶ï¼ˆæœ€ç®€å•ï¼‰
```bash
ssh user@dadiai.cn
cd /path/to/backend
pm2 stop backend
rm database.db
pm2 start backend
```

#### æ–¹æ³•2ï¼šä½¿ç”¨é‡ç½®è„šæœ¬ï¼ˆæœ€å®‰å…¨ï¼Œæ¨èï¼‰
```bash
ssh user@dadiai.cn
cd /path/to/backend

# Linux/Mac
bash reset_database.sh

# Windows  
reset_database.bat

# æˆ–ç›´æ¥è¿è¡Œ
python reset_models.py

# é‡å¯æœåŠ¡
pm2 restart backend
```

## ğŸ“Š é¢„æœŸç»“æœ

### APIè¿”å› (http://dadiai.cn:8000/api/models)
```json
{
  "models": [
    {"id": "hailuo_2_3", "price": 0.99, "display_name": "æµ·èº 2.3"},
    {"id": "hailuo_2_3_fast", "price": 0.79, "display_name": "æµ·èº 2.3-Fast"},
    {"id": "hailuo_2_0", "price": 1.19, "display_name": "æµ·èº 2.0"},
    {"id": "hailuo_3_1", "price": 1.59, "display_name": "æµ·èº 3.1"},
    {"id": "hailuo_3_1_pro", "price": 2.99, "display_name": "æµ·èº 3.1-Pro"},
    {"id": "beta_3_1", "price": 0.69, "display_name": "Beta 3.1"},
    {"id": "beta_3_1_fast", "price": 0.35, "display_name": "Beta 3.1 Fast"},
    {"id": "hailuo_1_0_director", "price": 0.59, "display_name": "æµ·èº 1.0-Director"},
    {"id": "hailuo_1_0_live", "price": 0.59, "display_name": "æµ·èº 1.0-Live"},
    {"id": "hailuo_1_0", "price": 0.49, "display_name": "æµ·èº 1.0"}
  ],
  "total": 10
}
```

### å‰ç«¯æ˜¾ç¤º

**å…¨éƒ¨ç³»åˆ—ï¼š**
- æ˜¾ç¤º10ä¸ªæ¨¡å‹
- æ¯ä¸ªæ¨¡å‹æ˜¾ç¤ºæ­£ç¡®çš„ä»·æ ¼

**2.3ç³»åˆ—ï¼š**
- æ˜¾ç¤º6ä¸ªæ¨¡å‹
- hailuo_2_3, hailuo_2_3_fast, hailuo_2_0
- hailuo_1_0_director, hailuo_1_0_live, hailuo_1_0

**3.1ç³»åˆ—ï¼š**
- æ˜¾ç¤º4ä¸ªæ¨¡å‹
- hailuo_3_1, hailuo_3_1_pro
- beta_3_1, beta_3_1_fast

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. éªŒè¯API
```bash
curl http://dadiai.cn:8000/api/models | python -m json.tool
```

æ£€æŸ¥ï¼š
- âœ… total = 10
- âœ… åŒ…å«hailuo_3_1å’Œhailuo_3_1_pro
- âœ… æ¯ä¸ªæ¨¡å‹æœ‰ä¸åŒçš„ä»·æ ¼

### 2. æµ‹è¯•å‰ç«¯

1. **æ¸…é™¤ç¼“å­˜**
   - Ctrl+Shift+Delete
   - æˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼

2. **æ‰“å¼€æ§åˆ¶å°**
   - F12 â†’ Console

3. **è®¿é—®é¡µé¢**
   ```
   http://dadiai.cn:8000/dashboard
   ```

4. **æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º**
   ```
   ğŸ” [DEBUG] æ¨¡å‹æ€»æ•°: 10
   ğŸ” [DEBUG] æ˜¾ç¤ºæ‰€æœ‰æ¨¡å‹: 10 ä¸ª
   ```

5. **æµ‹è¯•ç³»åˆ—åˆ‡æ¢**
   - ç‚¹å‡»"2.3ç³»åˆ—" â†’ åº”æ˜¾ç¤º6ä¸ªæ¨¡å‹
   - ç‚¹å‡»"3.1ç³»åˆ—" â†’ åº”æ˜¾ç¤º4ä¸ªæ¨¡å‹
   - ç‚¹å‡»"å…¨éƒ¨" â†’ åº”æ˜¾ç¤º10ä¸ªæ¨¡å‹

6. **éªŒè¯ä»·æ ¼**
   - é€‰æ‹©ä¸åŒæ¨¡å‹
   - åº•éƒ¨"æœ¬æ¬¡æ¶ˆè€—"åº”æ˜¾ç¤ºæ­£ç¡®ä»·æ ¼

## ğŸ“ ç›¸å…³æ–‡ä»¶

### å·²ä¿®æ”¹çš„æ–‡ä»¶
- âœ… `frontend/src/views/Dashboard.vue` - å‰ç«¯è¿‡æ»¤é€»è¾‘
- âœ… `backend/main.py` - åç«¯æ¨¡å‹å®šä¹‰
- âœ… `backend/reset_models.py` - é‡ç½®è„šæœ¬ï¼ˆå¢å¼ºç‰ˆï¼‰

### æ–°å¢çš„æ–‡ä»¶
- ğŸ“„ `backend/reset_database.sh` - Linux/Macé‡ç½®è„šæœ¬
- ğŸ“„ `backend/reset_database.bat` - Windowsé‡ç½®è„šæœ¬
- ğŸ“„ `CRITICAL_FIX_REQUIRED.md` - å…³é”®ä¿®å¤æ­¥éª¤
- ğŸ“„ `SOLUTION_SUMMARY.md` - æœ¬æ–‡ä»¶
- ğŸ“„ `DEBUG_GUIDE.md` - è°ƒè¯•æŒ‡å—

### å·²æœ‰çš„æ–‡æ¡£
- ğŸ“„ `BUGFIX_MODEL_FILTER.md` - è¯¦ç»†çš„bugä¿®å¤æ–‡æ¡£

## ğŸ¯ Gitæäº¤è®°å½•

ç›¸å…³æäº¤ï¼š
- `ca6daab` - fix: ä¿®å¤æ¨¡å‹ä»·æ ¼æ˜¾ç¤ºå’Œè¿‡æ»¤åŠŸèƒ½
- `55ed5e3` - fix: ä¿®å¤æ¨¡å‹ç³»åˆ—è¿‡æ»¤é€»è¾‘ - ä½¿ç”¨æ­£ç¡®çš„å­—æ®µåmodel.id
- `56349ce` - fix: å¢å¼ºæ¨¡å‹è¿‡æ»¤é€»è¾‘å’Œè°ƒè¯•ä¿¡æ¯ - ä¿®å¤åˆå§‹åŠ è½½å’Œç³»åˆ—åˆ‡æ¢é—®é¢˜

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆä»£ç ä¿®å¤äº†ä½†é—®é¢˜è¿˜åœ¨ï¼Ÿ
A: å› ä¸ºæ•°æ®åº“æ²¡æœ‰é‡æ–°åˆå§‹åŒ–ã€‚`init_default_models()`å‡½æ•°æœ‰ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚æœæ•°æ®åº“ä¸­å·²æœ‰æ•°æ®å°±ä¸ä¼šæ›´æ–°ã€‚

### Q: å¦‚ä½•ç¡®è®¤æ•°æ®åº“å·²æ­£ç¡®åˆå§‹åŒ–ï¼Ÿ
A: è®¿é—®APIç«¯ç‚¹å¹¶æ£€æŸ¥ï¼š
```bash
curl http://dadiai.cn:8000/api/models
```
åº”è¯¥è¿”å›10ä¸ªæ¨¡å‹ï¼Œæ¯ä¸ªæœ‰ä¸åŒä»·æ ¼ã€‚

### Q: é‡ç½®æ•°æ®åº“ä¼šä¸¢å¤±æ•°æ®å—ï¼Ÿ
A: åªä¼šåˆ é™¤æ¨¡å‹å®šä¹‰æ•°æ®ï¼Œä¸ä¼šå½±å“ç”¨æˆ·æ•°æ®ã€è®¢å•æ•°æ®ç­‰ã€‚ä½¿ç”¨`reset_database.sh`è„šæœ¬ä¼šè‡ªåŠ¨å¤‡ä»½æ—§æ•°æ®åº“ã€‚

### Q: å¦‚æœé‡ç½®åé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Ÿ
A: è¯·æ£€æŸ¥ï¼š
1. åç«¯æœåŠ¡æ˜¯å¦æˆåŠŸé‡å¯
2. æ˜¯å¦æœ‰å¤šä¸ªæ•°æ®åº“æ–‡ä»¶
3. åç«¯æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯
4. æµè§ˆå™¨ç¼“å­˜æ˜¯å¦å·²æ¸…é™¤

## ğŸ“ æ”¯æŒ

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ï¼š
1. APIè¿”å›çš„å®Œæ•´æ•°æ®
2. æµè§ˆå™¨æ§åˆ¶å°è¾“å‡ºï¼ˆæˆªå›¾ï¼‰
3. åç«¯æ—¥å¿—
4. æ•°æ®åº“æ–‡ä»¶ä½ç½®å’Œå¤§å°

## âœ¨ æ€»ç»“

**ä»£ç ä¿®å¤ï¼š** âœ… å®Œæˆ  
**æ•°æ®åº“é‡ç½®ï¼š** â³ éœ€è¦æ‰§è¡Œ  
**æµ‹è¯•éªŒè¯ï¼š** â³ å¾…å®Œæˆ

æ‰§è¡Œæ•°æ®åº“é‡ç½®åï¼Œæ‰€æœ‰é—®é¢˜åº”è¯¥å¾—åˆ°è§£å†³ï¼
